<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../../partials/header.ejs")%>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <style>
            body {
                background-image: linear-gradient(15deg, #181D31 0%, #272829 100%) !important;
            }

            .manage.container {
                padding: 2em 3em;
                background-color: white !important;
                box-shadow: rgba(153, 153, 153, 0.2) 0px 2px 5px 0px !important;
                border-radius: 10px;
            }
        </style>
</head>

<body>
    <%- include("../../partials/nav.ejs")%>
        <div class="manage container my-4">
            <h1 class="h4 mb-5 text-center">แก้ไขข้อมูลผู้ใช้</h1>
            <div class="d-flex flex-row my-5">
                <div class="w-50">
                    <h2 class="h5 text-center mb-4">โปรไฟล์ผู้ใช้</h2>
                    <img style="width: 400px; height: 400px; margin: auto auto;" class="border border-secondary-subtle rounded-circle d-block" src="/images/profile/<%= user.img%>" alt="<%= user.username%>">
                </div>
                <form class="w-50" action="/admin/user/update" method="post">
                    <h2 class="h5 mb-4">ข้อมูลผู้ใช้</h2>
                    <div class="mb-3">
                        <input readonly hidden name="userId" value="<%= user._id%>" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">อีเมล</label>
                        <input readonly value="<%= user.email%>" class="form-control">
                        <div id="emailHelp" class="form-text">ไม่สามารถแก้ไขอีเมลของผู้ใช้งานได้</div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ชื่อผู้ใช้</label>
                        <input name="username" class="form-control" value="<%= user.username%>">
                    </div>
                    <div class="mb-3 d-flex gap-4">
                        <div class="w-50">
                            <label class="form-label">นามสกุล</label>
                            <input name="lname" class="form-control" value="<%= user.lname%>">
                        </div>
                        <div class="w-50">
                            <label class="form-label">ชื่อจริง</label>
                            <input name="fname" class="form-control" value="<%= user.fname%>">
                        </div>
                    </div>
                    <div class="form-check mb-3 px-0">
                        <%if((user.role!=1)){%>
                            <input type="checkbox" class="btn-check" id="btn-check-isAdmin" name="isAdmin" value="yes" autocomplete="off">
                            <label class="btn btn-outline-success me-3 d-inline-block" for="btn-check-isAdmin"><i class="bi bi-check-circle me-2"></i> เพิ่มสิทธิ์แอดมิน</label>
                            
                            <input type="checkbox" class="btn-check" id="btn-check-removeAdmin" name="removeAdmin" value="yes" autocomplete="off" disabled>
                            <label class="btn btn-outline-danger d-inline-block" for="btn-check-removeAdmin"><i class="bi bi-x-circle me-2"></i> ลบสิทธิ์แอดมิน</label>
                        <%}else{%>
                            <input type="checkbox" class="btn-check" id="btn-check-isAdmin" name="isAdmin" value="yes" autocomplete="off" disabled>
                            <label class="btn btn-outline-success me-3 d-inline-block" for="btn-check-isAdmin"><i class="bi bi-check-circle me-2"></i> เพิ่มสิทธิ์แอดมิน</label>
                            
                            <input type="checkbox" class="btn-check" id="btn-check-removeAdmin" name="removeAdmin" value="yes" autocomplete="off">
                            <label class="btn btn-outline-danger d-inline-block" for="btn-check-removeAdmin"><i class="bi bi-x-circle me-2"></i> ลบสิทธิ์แอดมิน</label>
                        <%}%>
                    </div>
                    <button type="submit" class="mt-4 btn btn-primary w-100">ตกลง</button>
                    <div class="mt-3">
                        <a class="btn btn-outline-danger w-100" href="/admin">ยกเลิก</a>
                    </div>
                </form>
            </div>
        </div>
</body>

</html>